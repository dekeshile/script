#----------------------------------------------------------------------
#ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7B27/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------

# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7CH4/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------
# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7CH5/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------

# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7JMO/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------

# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7JMP/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------

# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7K8M/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------


#---------------------------------------------------------------------

#ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7BWJ/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #---------------------------------------------------------------------

# #---------------------------------------------------------------------

# #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd /home/wurp/workspace/antibody/7E23/LIE
# echo -e 0 \n | gmx trjconv -s md_0.tpr  -f md_0.xtc -o md_0_noPBC.xtc -pbc mol -ur compact
# gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE_ligand.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

# #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
# cd ..
# gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_0_energy.tpr -n index_LIE.ndx
# gmx mdrun -deffnm md_0_energy -rerun md_0_noPBC.xtc
# echo -e 21 22 | gmx energy -f md_0_energy.edr -b 2000

#---------------------------------------------------------------------


# ```
# cd /home/wurp/workspace/antibody/7B27/LIE ğŸ‰
# cd /home/wurp/workspace/antibody/7CH4/LIE ğŸ‰
# cd /home/wurp/workspace/antibody/7CH5/LIE ğŸ‰

# cd /home/wurp/workspace/antibody/7JMO/LIE  ğŸ‰
# cd /home/wurp/workspace/antibody/7JMP/LIE ğŸ‰
# cd /home/wurp/workspace/antibody/7JVA/LIE   åªæœ‰LIEï¼Œä¸å¾—å…¶ä»–æ¨¡æ‹Ÿçš„æ•°æ®
# cd /home/wurp/workspace/antibody/7K8M/LIE ğŸ‰

# ```

# #åš index æ–‡ä»¶
# ```
# gmx make_ndx -f md_1.gro -o index_LIE_ligand.ndx

# 1
# name 19 ligand
# 0 & !1
# name 20 environment
# q
# cd ..
# gmx make_ndx -n index.ndx -o index_LIE.ndx

# 0 & !20
# name 21 environment
# q
# ```


# pdbIdArr=("6YZ5" "6ZBP" "7B27" "7BWJ" "7CH4" "7CH5"  "7E23" "7JMO" "7JMP" "7K8M")

# for  pdbId  in ${pdbIdArr[@]}
# do
#     cd /home/wurp/workspace/antibody/$pdbId/LIE
#     ################ MD with posres å¸¦ä½ç½®é™åˆ¶ ###############
#     gmx grompp -f ../../mdp/prod_posres.mdp -c npt.gro -t npt.cpt -p topol.top -o md_1.tpr -r npt.gro
#     gmx mdrun -deffnm md_1 -pin on -ntmpi 1 -ntomp 6 -gpu_id 0 -pme gpu -update gpu -bonded gpu
# done



# pdbIdArr=("6YZ5" "6ZBP" "7B27" "7BWJ" "7CH4" "7CH5"  "7E23" "7JMO" "7JMP" "7K8M")
# for  pdbId  in ${pdbIdArr[@]}
# do
#     #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
#     cd /home/wurp/workspace/antibody/$pdbId/LIE
#     echo -e 0 \n | gmx trjconv -s md_1.tpr  -f md_1.xtc -o md_1_noPBC.xtc -pbc mol -ur compact
#     gmx grompp -f ../../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_1_energy.tpr -n index_LIE_ligand.ndx
#     gmx mdrun -deffnm md_1_energy -rerun md_1_noPBC.xtc

#     #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
#     cd ..
#     echo -e 0 \n | gmx trjconv -s md_1.tpr  -f md_1.xtc -o md_1_noPBC.xtc -pbc mol -ur compact
#     gmx grompp -f ../mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_1_energy.tpr -n index_LIE.ndx
#     gmx mdrun -deffnm md_1_energy -rerun md_1_noPBC.xtc
# done


# pdbIdArr=("6YZ5" "6ZBP" "7B27" "7BWJ" "7CH4" "7CH5"  "7E23" "7JMO" "7JMP" "7K8M")
# for  pdbId  in ${pdbIdArr[@]}
# do
# {
#     mv /home/wurp/workspace/antibody/$pdbId/LIE/rmsd_md_0_noPBC_noPBC.xvg  /home/wurp/workspace/antibody/$pdbId/LIE/rmsd_md_0_noPBC.xvg
#     mv /home/wurp/workspace/antibody/$pdbId/LIE/rmsd_md_1_noPBC_noPBC.xvg /home/wurp/workspace/antibody/$pdbId/LIE/rmsd_md_1_noPBC.xvg
# } &
# done



{
    #ã€é…ä½“å•ç‹¬æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
     cd /home/wurp/workspace/antibody/7CH5/cutoff/LIE
    echo -e 0 \n | gmx trjconv -s md_1.tpr  -f md_1.xtc -o md_1_noPBC.xtc -pbc mol -ur compact
    echo -e 0 0 | gmx rms -s md_1.tpr  -f md_1.xtc -o rmsd_md_1_noPBC.xvg
    gmx grompp -f /home/wurp/workspace/antibody/mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_1_energy.tpr -n index_LIE_ligand.ndx
    gmx mdrun -deffnm md_1_energy -rerun md_1_noPBC.xtc
}&

{
    #ã€å¤åˆç‰©æ¨¡æ‹Ÿã€‘åçš„èƒ½é‡æå–
     cd /home/wurp/workspace/antibody/7CH5/cutoff
     echo -e 0 \n | gmx trjconv -s md_1.tpr  -f md_1.xtc -o md_1_noPBC.xtc -pbc mol -ur compact
     echo -e 0 0 | gmx rms -s md_1.tpr  -f md_1.xtc -o rmsd_md_1_noPBC.xvg
    gmx grompp -f /home/wurp/workspace/antibody/mdp/LIE.mdp -c npt.gro -t npt.cpt -p topol.top -o md_1_energy.tpr -n index_LIE.ndx
    gmx mdrun -deffnm md_1_energy -rerun md_1_noPBC.xtc
}&
